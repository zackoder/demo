<form (ngSubmit)="onSignUp()" class="signup-form p-4" #signupForm="ngForm">
  <!-- Nickname -->
  <div class="mb-3">
    <label for="nickname" class="form-label d-block fw-semibold"
      >Nickname</label
    >
    <input
      id="nickname"
      name="nickname"
      type="text"
      class="form-control w-100 d-block"
      [(ngModel)]="data.nickname"
      required
    />
    @if (errorMsg.errNickname) {
    <p class="text-danger small mt-1">{{ errorMsg.errNickname }}</p>
    }
  </div>

  <!-- First Name -->
  <div class="mb-3">
    <label for="firstName" class="form-label d-block fw-semibold"
      >First Name</label
    >
    <input
      id="firstName"
      name="firstName"
      type="text"
      class="form-control w-100 d-block"
      [(ngModel)]="data.firstName"
    />
    @if (errorMsg.errFirstName) {
    <p class="text-danger small mt-1">{{ errorMsg.errFirstName }}</p>
    }
  </div>

  <!-- Last Name -->
  <div class="mb-3">
    <label for="lastName" class="form-label d-block fw-semibold"
      >Last Name</label
    >
    <input
      id="lastName"
      name="lastName"
      type="text"
      class="form-control w-100 d-block"
      [(ngModel)]="data.lastName"
    />
    @if (errorMsg.errLastName) {
    <p class="text-danger small mt-1">{{ errorMsg.errLastName }}</p>
    }
  </div>

  <!-- Email -->
  <div class="mb-3">
    <label for="email" class="form-label d-block fw-semibold">Email</label>
    <input
      id="email"
      name="email"
      type="email"
      class="form-control w-100 d-block"
      [(ngModel)]="data.email"
      required
    />
    @if (errorMsg.errEmail) {
    <p class="text-danger small mt-1">{{ errorMsg.errEmail }}</p>
    }
  </div>

  <!-- Password -->
  <div class="mb-3">
    <label for="password" class="form-label d-block fw-semibold"
      >Password</label
    >
    <input
      id="password"
      name="password"
      type="password"
      class="form-control w-100 d-block"
      [(ngModel)]="data.password"
      (ngModelChange)="onPasswordChange($event)"
      required
    />
    @if (errorMsg.errPassword) {
    <p class="text-danger small mt-1">{{ errorMsg.errPassword }}</p>
    }

    <!-- Password Requirements -->
    <div class="password-requirements mt-2 ps-2">
      <p
        class="small mb-1"
        [class.text-success]="passwordValidation.hasLowerCase"
        [class.text-danger]="!passwordValidation.hasLowerCase"
      >
        {{ passwordValidation.hasLowerCase ? "✓" : "✗" }} At least one lowercase
        letter
      </p>

      <p
        class="small mb-1"
        [class.text-success]="passwordValidation.hasUpperCase"
        [class.text-danger]="!passwordValidation.hasUpperCase"
      >
        {{ passwordValidation.hasUpperCase ? "✓" : "✗" }} At least one uppercase
        letter
      </p>

      <p
        class="small mb-1"
        [class.text-success]="passwordValidation.hasNumber"
        [class.text-danger]="!passwordValidation.hasNumber"
      >
        {{ passwordValidation.hasNumber ? "✓" : "✗" }} At least one number
      </p>

      <p
        class="small mb-1"
        [class.text-success]="passwordValidation.hasSpecialChar"
        [class.text-danger]="!passwordValidation.hasSpecialChar"
      >
        {{ passwordValidation.hasSpecialChar ? "✓" : "✗" }} At least one special
        character
      </p>

      <p
        class="small mb-1"
        [class.text-success]="passwordValidation.hasMinLength"
        [class.text-danger]="!passwordValidation.hasMinLength"
      >
        {{ passwordValidation.hasMinLength ? "✓" : "✗" }} At least 8 characters
      </p>
    </div>
  </div>

  <!-- Confirm Password -->
  <div class="mb-3">
    <label for="confirmPassword" class="form-label d-block fw-semibold"
      >Confirm Password</label
    >
    <input
      id="confirmPassword"
      name="confirmPassword"
      type="password"
      class="form-control w-100"
      [(ngModel)]="data.confirmPassword"
      required
    />
    @if (errorMsg.errConfirmPassword) {
    <p class="text-danger small mt-1">{{ errorMsg.errConfirmPassword }}</p>
    }
  </div>

  <!-- Bio -->
  <div class="mb-3">
    <label for="bio" class="form-label d-block fw-semibold">Bio</label>
    <textarea
      id="bio"
      name="bio"
      class="form-control w-100"
      rows="3"
      [(ngModel)]="data.bio"
    ></textarea>
    @if (errorMsg.errBio) {
    <p class="text-danger small mt-1">{{ errorMsg.errBio }}</p>
    }
  </div>

  <!-- Submit -->
  <button
    type="submit"
    class="btn btn-primary w-100 py-2 mt-2"
    [disabled]="isLoading || !signupForm.form.valid"
  >
    {{ isLoading ? "Signing up..." : "Sign Up" }}
  </button>

  <p class="text-center mt-2 mb-1">
    already have an account <a (click)="login()" class="link-primary">log in</a>
  </p>
</form>
